version: "3.8"

services:
  core-laravel:
    image: registry.hamdocker.ir/paylibero/build-core-laravel:${CI_COMMIT_SHORT_SHA}
    build:
      context: ../../lara-app
      args:
        - CI_COMMIT_SHORT_SHA
        - CI_COMMIT_MESSAGE
        - CI_PIPELINE_CREATED_AT
        - CI_PIPELINE_URL

  queue-worker:
    image: registry.hamdocker.ir/paylibero/queue-worker:${CI_COMMIT_SHORT_SHA}
    build:
      context: ../../lara-app
      dockerfile: dockerfiles/queues/queue.dockerfile
      args:
        - CI_COMMIT_SHORT_SHA
        - CI_COMMIT_MESSAGE
        - CI_PIPELINE_CREATED_AT
        - CI_PIPELINE_URL

